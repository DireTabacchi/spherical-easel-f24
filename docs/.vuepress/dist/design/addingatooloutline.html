<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adding A Tool</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.da642629.css" as="style"><link rel="preload" href="/assets/js/app.dbe54ffb.js" as="script"><link rel="preload" href="/assets/js/2.3e5ec5bd.js" as="script"><link rel="preload" href="/assets/js/11.1a589423.js" as="script"><link rel="prefetch" href="/assets/js/10.4c8b598f.js"><link rel="prefetch" href="/assets/js/12.1f54efe0.js"><link rel="prefetch" href="/assets/js/13.76321926.js"><link rel="prefetch" href="/assets/js/14.33e4e271.js"><link rel="prefetch" href="/assets/js/15.ee1289d9.js"><link rel="prefetch" href="/assets/js/16.f97d6842.js"><link rel="prefetch" href="/assets/js/17.e59560fe.js"><link rel="prefetch" href="/assets/js/18.2feeaa81.js"><link rel="prefetch" href="/assets/js/19.c06a6e66.js"><link rel="prefetch" href="/assets/js/20.96b53416.js"><link rel="prefetch" href="/assets/js/21.b185d405.js"><link rel="prefetch" href="/assets/js/22.17040f51.js"><link rel="prefetch" href="/assets/js/23.4078fbb4.js"><link rel="prefetch" href="/assets/js/24.03ce167b.js"><link rel="prefetch" href="/assets/js/25.20ff476a.js"><link rel="prefetch" href="/assets/js/26.2b1cdbee.js"><link rel="prefetch" href="/assets/js/27.eec4d1c7.js"><link rel="prefetch" href="/assets/js/28.520dfd2b.js"><link rel="prefetch" href="/assets/js/29.c926afc2.js"><link rel="prefetch" href="/assets/js/3.d9ea36d2.js"><link rel="prefetch" href="/assets/js/30.99569cc5.js"><link rel="prefetch" href="/assets/js/31.62618b6d.js"><link rel="prefetch" href="/assets/js/32.c25e95eb.js"><link rel="prefetch" href="/assets/js/33.db07540d.js"><link rel="prefetch" href="/assets/js/34.42293dec.js"><link rel="prefetch" href="/assets/js/35.23061631.js"><link rel="prefetch" href="/assets/js/36.f189b29f.js"><link rel="prefetch" href="/assets/js/37.862150d3.js"><link rel="prefetch" href="/assets/js/38.b43f9653.js"><link rel="prefetch" href="/assets/js/39.ba707d7f.js"><link rel="prefetch" href="/assets/js/4.6a2b2572.js"><link rel="prefetch" href="/assets/js/40.a1e276aa.js"><link rel="prefetch" href="/assets/js/41.7be17260.js"><link rel="prefetch" href="/assets/js/42.4e07a402.js"><link rel="prefetch" href="/assets/js/43.82cea979.js"><link rel="prefetch" href="/assets/js/44.55298575.js"><link rel="prefetch" href="/assets/js/45.3685f9ee.js"><link rel="prefetch" href="/assets/js/46.623261da.js"><link rel="prefetch" href="/assets/js/47.9f2ad1ed.js"><link rel="prefetch" href="/assets/js/5.075af5cb.js"><link rel="prefetch" href="/assets/js/6.ce2b3219.js"><link rel="prefetch" href="/assets/js/7.e2160bb5.js"><link rel="prefetch" href="/assets/js/8.1ef45a8b.js"><link rel="prefetch" href="/assets/js/9.17ea37ff.js">
    <link rel="stylesheet" href="/assets/css/0.styles.da642629.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="adding-a-tool"><a href="#adding-a-tool" class="header-anchor">#</a> Adding A Tool</h1> <p>There are two different type of tools in Sphere Easel: those that create new geometric objects based on user mouse input and those that use existing geometric and measurement objects to control the location of an existing kind of object object (i.e. point, line segment, line, circle, or ellipse). The former tools are called New Object Tools and the later are called Control Tools</p> <h2 id="adding-a-control-tool"><a href="#adding-a-control-tool" class="header-anchor">#</a> Adding a Control Tool</h2> <p>This section is an outline of the steps need to add a tool that takes a collection of objects (geometric and measurement) and produces the parameters to locate and size a non-custom existing <span class="class">Nodule</span> object (i.e. <span class="class">Point</span>,<span class="class">Segment</span>,<span class="class">Line</span>, <span class="class">Circle</span>, <span class="class">Ellipse</span>) based on the selection collection of objects. This will involve creating a new <span class="class">SENodule</span> object and a new eventHandler to construct the <span class="class">SENodule</span> object and associated it to an exist <span class="class">Nodule</span> object. In all cases attempt to follow the naming conventions outlined by the other variables and files.</p> <ol><li><p>Create a new entry in the <span class="variable">buttonList</span> found in the <span class="file">ToolGroups.vue</span> file. Decide on</p> <ul><li><span class="variable">id</span>: This is a number that controls the order that the tools within this group are listed.</li> <li><span class="variable">actionModeValue</span>: This is a unique string (the actionMode) that is used to activate the correct event handler when this button is pressed.</li> <li><span class="variable">icon</span>: Create an icon or select a name from the <a href="https://cdn.materialdesignicons.com/5.0.45/" target="_blank" rel="noopener noreferrer">Material Design Icons<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Use the language feature to set up the following messages. Each of the variables below is a string pointer to an object in a file in the <span class="directory">languages</span> directory. English speakers will probably add to the <span class="file">en.json</span> file.
<ul><li><span class="variable">displayedName</span> A short name for the tool displayed in footer.</li> <li><span class="variable">toolTipMessage</span> A short message to describe the tools use when the button is moused over.</li> <li><span class="variable">toolUseMessage</span> A longer message to describe more fully the use of the tool.</li></ul></li> <li><span class="variable">displayToolUseMessage</span>: A flag to control the display of the tool use message.</li> <li><span class="variable">toolGroup</span>: This is the group that the tool will appear in. Picking an existing group is the easiest way to get the tool displayed. If a new tool group is created, this section of code in <span class="variable">ToolGroups.vue</span> will have to be duplicated:</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!--
   The XXXXXX Tool Group only shown if the user has permission to use a tool in this
   group. Note the use of the translation $t(key_value).
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>XXXXXXXToolGroup<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nonEmptyGroup('XXXXXX')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>body-1 font-weight-bold<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ $t(&quot;toolGroups.XXXXXXTools&quot;) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-btn-toggle</span>
     <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actionMode<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>switchActionMode<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mr-2 d-flex flex-wrap accent<span class="token punctuation">&quot;</span></span>
   <span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ToolButton</span>
       <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(button, pos) in buttonList<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">:button</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">toolGroup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>XXXXXX<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">v-on:</span>displayOnlyThisToolUseMessage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>displayOnlyThisToolUseMessageFunc<span class="token punctuation">&quot;</span></span>
     <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ToolButton</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-btn-toggle</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>Add the new tool name to the list of tools to be displayed in ???????. Add the <span class="variable">actionMode</span> string to the list.</p></li> <li><p>Write a new <span class="class">SENodule</span> file. These files always start with the letters SE. See the <a href="/design/#models-directory">Models Directory</a>.</p> <ul><li><p>Copy the form of the <span class="method">update(state: SaveStateType)</span> method. In particular this should start with</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">canUpdateNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setOutOfDate</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then it should update the existence and location of the object and should end with setting the display of the corresponding <span class="class">Nodule</span> object. (Make sure that you set the parameters to properly display the <span class="class">Nodule</span> object -- read the variables section of the object for directions.)
The last lines should be</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> SaveStateMode<span class="token punctuation">.</span>UndoMove<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Store any information about the SENodule that is *not* determined by its point parents.  (Any</span>
    <span class="token comment">// information that is not captured by the locations of the point parent(s) and will not correctly be</span>
    <span class="token comment">// recreated on an update({}) method must be store here). A new XXXSaveState will have to be</span>
    <span class="token comment">// created in @/types/index.ts</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">case</span> SaveStateMode<span class="token punctuation">.</span>UndoDelete<span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token comment">// Store all information about this SENodule here</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// The DisplayOnly case fall through and does nothing</span>
  <span class="token keyword">case</span> SaveStateMode<span class="token punctuation">.</span>DisplayOnly<span class="token operator">:</span>
  <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateKids</span><span class="token punctuation">(</span>state<span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>See more in the <a href="/design/#move-handler">Move Handler</a> and <a href="/design/#delete-handler">Delete Handler</a>.</p></li></ul></li> <li><p>Write an <a href="/design/#event-handlers">event handler</a>. Start by thinking about which tool is most similar to the one being created. Start by creating a copy of that file and renaming it appropriately. Copy the structure to properly link the <span class="class">Nodule</span> and <span class="class">SENodule</span> objects. See the <a href="/design/#plottables-directory">Plottables Directory</a>.</p> <ul><li>A new <span class="command">Command</span> object will have to written. Look and see which existing commands are most similar to the one being created. Copy that command. See the <a href="/design/#commands">Command</a> section. This class is where all newly created objects are inserted (and removed on <span class="method">restoreState()</span>) into the <a href="/design/#data-structure">Data Structure</a>. Think carefully about undoing. Adding a new kind of point requires that when you undo and then redo the add operation it remains the new kid of object.</li> <li>A new mutations of the store may be required. Look in the <span class="file">mutations.ts</span> in the <a href="/design/#store">Store</a>. Although the <span class="string">RemovePoint</span> mutation might work.</li> <li>Edge case questions to ask: What should the behavior be if...
<ul><li>The user mouse presses outside of the canvas, and mouse releases in the canvas (inside of the sphere or not)?</li> <li>The user mouse presses inside the canvas, mouse moves outside of the sphere (with out a mouse leave event, so still in the canvas), and then mouse releases inside of the canvas (inside of the sphere or not)?</li> <li>The user mouse presses inside the canvas, mouse moves outside of the sphere (<em>with</em> a mouse leave event), and then mouse releases... inside of the canvas or not... inside of the sphere or not?</li> <li>The user presses and release in the same location.</li></ul></li></ul></li> <li><p>Add the tool to the <span class="file">SphereFrame.vue</span> file.</p> <ul><li>Import the handler.</li> <li>Add a private variable (like <span class="variable">xxxxTool</span> ) for the handler.</li> <li>In the <span class="method">mounted()</span> method add the constructor call.</li> <li>In the <span class="method">switchActionMode(mode: string)</span> add a new case using the <span class="variable">actionMode</span> string and tool reference</li></ul></li> <li><p>Debug your tool. Play with it and make sure it behaves in many situations.</p> <ul><li>What is the behavior under all the edge condition list in step 4? How does undo and redo work in each of those edge cases?</li></ul></li> <li><p>Add at least three new tests in the <span class="file">???</span> file in the <span class="directory">test</span> directory.</p></li> <li><p>Update the documentation. Create a new description of the use of the tool in the</p> <ul><li><a href="/tools/edit.html">Tools Documents</a></li> <li><a href="/design/#event-handlers">Event Handlers</a></li></ul></li></ol> <h2 id="adding-a-new-object-tool"><a href="#adding-a-new-object-tool" class="header-anchor">#</a> Adding a New Object Tool</h2> <p>This section is an outline of the steps needed to add a tool that takes user mouse information and creates a new one-dimensional object based on the user information. This is a much more involved task and requires an intimate knowledge of how Sphere Easel work. This will involving creating both a new <span class="class">SENodule</span> object and a corresponding <span class="class">Nodule</span> object. It will involve modifying many of the existing class to take into account this new object.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dbe54ffb.js" defer></script><script src="/assets/js/2.3e5ec5bd.js" defer></script><script src="/assets/js/11.1a589423.js" defer></script>
  </body>
</html>
